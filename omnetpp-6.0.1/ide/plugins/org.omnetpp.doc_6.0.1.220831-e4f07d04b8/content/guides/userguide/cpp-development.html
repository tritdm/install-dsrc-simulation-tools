
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>C++ Development</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css" />
    <link rel="stylesheet" type="text/css" href="../_static/omnetpp.css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Launching and Debugging" href="launcher.html" />
    <link rel="prev" title="Editing Message Files" href="msg-editor.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
          

          <div class="body" role="main">
            
  <section id="c-development">
<h1>C++ Development</h1>
<section id="introduction">
<h2>Introduction</h2>
<p>The OMNeT++ IDE contains editors, views and other tools to assist you while developing your C++ code. C++ files open in
the IDE in the C++ source editor. The C++ source editor supports syntax highlighting, documentation tooltips, content
assist, automatic indentation, code formatting, refactoring, and several other useful features. The IDE also allows you
to configure the build, start the build process, launch simulations, and debug the model without leaving the IDE.</p>
<p>Most of these features are provided by the Eclipse CDT (C/C++ Development Tooling) project (<a class="reference external" href="http://eclipse.org/cdt">http://eclipse.org/cdt</a>).
This chapter briefly explains the basics of using CDT for developing simulation models. If you want to learn more about
how to use CDT effectively, we recommend that you read the CDT documentation in the IDE help system (Help/Help Content).</p>
<p>The OMNeT++ IDE extends CDT with the following features to make model development easier:</p>
<ul class="simple">
<li><p>A new OMNeT++ project creation wizard allows you to create simple, working simulation models in one step.</p></li>
<li><p>Makefiles are automatically generated for your project based on the project build configuration. The built-in
makefile generator is compatible with the command line <strong class="command">opp_makemake</strong> tool, and features deep makefiles, recursive
make, cross-project references, invoking the message compiler, automatic linking with the OMNeT++ libraries; and can
build executables, shared libraries or static libraries.</p></li>
<li><p>Makefile generation and the project build system can be configured using a GUI interface.</p></li>
<li><p>Project Features: Large projects can be partitioned into smaller units which can be independently excluded or
included in the build. Disabling parts of the project can significantly reduce build time or make it possible to
build the project at all.</p></li>
</ul>
</section>
<section id="prerequisites">
<h2>Prerequisites</h2>
<p>The OMNeT++ IDE (and the OMNeT++ simulation framework itself) requires a preinstalled compiler toolchain to function
properly.</p>
<ul class="simple">
<li><p>On Windows: The OMNeT++ distribution comes with a preconfigured MinGW compiler toolchain, there is no need to
manually install anything. By default, the IDE uses the Clang compiler from MinGW, but it is also possible to switch
to the GCC compiler (also part of MinGW).</p></li>
<li><p>On Linux: By default, the Clang compiler is used, but OMNeT++ falls back to use GCC if Clang is not present on the
system. You have to install Clang or GCC on your system before trying to compile a simulation with OMNeT++. Please
read the Install Guide for detailed instructions.</p></li>
<li><p>On macOS: You need to install Xcode Developer Tools to get compiler support before trying to compile a simulation
with OMNeT++. Please read the Install Guide for detailed instructions.</p></li>
</ul>
</section>
<section id="creating-a-c-project">
<h2>Creating a C++ Project</h2>
<p>To create an OMNeT++ project that supports C++ development, select <span class="menuselection">File ‣ New ‣ OMNeT++ Project</span>.</p>
<figure class="align-default" id="id2">
<a class="reference internal image-reference" href="../_images/Intro-NewProject.png"><img alt="../_images/Intro-NewProject.png" src="../_images/Intro-NewProject.png" style="width: 75%;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 32 </span><span class="caption-text">Creating an OMNeT++ project</span></p>
</figcaption>
</figure>
<p>This menu item will bring up the <span class="guilabel">New OMNeT++ Project</span> wizard. The wizard lets you create an OMNeT++-specific
project, which includes support for NED, MSG and INI file editing, as well as C++ development of simple modules.</p>
<p>On the first page of the wizard, specify the project name and ensure that the <span class="guilabel">Support C++ Development</span>
checkbox is selected.</p>
<figure class="align-default" id="id3">
<a class="reference internal image-reference" href="../_images/CPP-NewProjectWizard.png"><img alt="../_images/CPP-NewProjectWizard.png" src="../_images/CPP-NewProjectWizard.png" style="width: 60%;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 33 </span><span class="caption-text">Setting project name and enabling C++ support</span></p>
</figcaption>
</figure>
<p>Select a project template. A template defines the initial content and layout of the project.</p>
<figure class="align-default" id="id4">
<a class="reference internal image-reference" href="../_images/CPP-NewProjectWizard1.png"><img alt="../_images/CPP-NewProjectWizard1.png" src="../_images/CPP-NewProjectWizard1.png" style="width: 60%;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 34 </span><span class="caption-text">Selecting a project template</span></p>
</figcaption>
</figure>
<p>Select a toolchain that is supported on your platform. Usually you will see only a single supported toolchain, so there
is no need to change anything on the page.</p>
<figure class="align-default" id="id5">
<a class="reference internal image-reference" href="../_images/CPP-NewProjectWizard2.png"><img alt="../_images/CPP-NewProjectWizard2.png" src="../_images/CPP-NewProjectWizard2.png" style="width: 60%;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 35 </span><span class="caption-text">Selecting a toolchain</span></p>
</figcaption>
</figure>
<p>Finally, select one or more from the preset build configurations. A configuration is a set of options that are
associated with the build process. It is used mainly to build debug and release versions of your program.</p>
<figure class="align-default" id="id6">
<a class="reference internal image-reference" href="../_images/CPP-NewProjectWizard3.png"><img alt="../_images/CPP-NewProjectWizard3.png" src="../_images/CPP-NewProjectWizard3.png" style="width: 60%;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 36 </span><span class="caption-text">Selecting configurations</span></p>
</figcaption>
</figure>
<p>Pressing the <span class="guilabel">Finish</span> button will create the project.</p>
</section>
<section id="editing-c-code">
<h2>Editing C++ Code</h2>
<p>The OMNeT++ IDE comes with a C/C++ editor. In addition to standard editing features, the C/C++ editor provides syntax
highlighting, content assistance, and other C++ specific functionality. The source is continually parsed as you type,
and errors and warnings are displayed as markers on the editor rulers.</p>
<figure class="align-default" id="id7">
<a class="reference internal image-reference" href="../_images/CPP-Editor.png"><img alt="../_images/CPP-Editor.png" src="../_images/CPP-Editor.png" style="width: 80%;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 37 </span><span class="caption-text">C++ source editor</span></p>
</figcaption>
</figure>
<section id="the-c-editor">
<h3>The C++ Editor</h3>
<p>The C++ source editor provides the usual features of Eclipse-based text editors, such as syntax highlighting, clipboard
cut/copy/paste, unlimited undo/redo, folding, find/replace and incremental search.</p>
<p>The IDE scans and indexes the C++ files in your project in the background, and provides navigation and code analysis
features on top of that knowledge; this database is kept up to date as you edit the source.</p>
<section id="basic-functions">
<h4>Basic Functions</h4>
<p>Some of the most useful features of the source editor:</p>
<ul class="simple">
<li><p>Undo <kbd class="kbd docutils literal notranslate">Ctrl+Z</kbd>, Redo <kbd class="kbd docutils literal notranslate">Ctrl+Y</kbd></p></li>
<li><p>Switch between a C++ source and its matching header file <kbd class="kbd docutils literal notranslate">Ctrl+TAB</kbd></p></li>
<li><p>Indent/unindent code blocks <kbd class="kbd docutils literal notranslate">TAB</kbd> / <kbd class="kbd docutils literal notranslate">Shift+TAB</kbd></p></li>
<li><p>Correct indentation <kbd class="kbd docutils literal notranslate">Ctrl+I</kbd></p></li>
<li><p>Move lines <kbd class="kbd docutils literal notranslate">Alt+UP</kbd> / <kbd class="kbd docutils literal notranslate">Alt+DOWN</kbd></p></li>
<li><p>Find <kbd class="kbd docutils literal notranslate">Ctrl+F</kbd>, incremental search <kbd class="kbd docutils literal notranslate">Ctrl+J</kbd></p></li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The following functions can help you explore the IDE:</p>
<ul class="simple">
<li><p><kbd class="kbd docutils literal notranslate">Ctrl+Shift+L</kbd> pops up a window that lists all keyboard bindings, and</p></li>
<li><p><kbd class="kbd docutils literal notranslate">Ctrl+3</kbd> brings up a filtered list of all available commands.</p></li>
</ul>
</div>
</section>
<section id="view-documentation">
<h4>View Documentation</h4>
<p>Hovering the mouse over an identifier will display its declaration and the documentation comment in a “tooltip” window.
The window can be made persistent by hitting F2.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If you are on Ubuntu and you see all-black tooltips, you need to change the tooltip colors in Ubuntu; see the Ubuntu
chapter of the <a class="reference internal" href="../installguide/index.html#install-guide"><span class="std std-ref">Installation Guide</span></a> for details.</p>
</div>
</section>
<section id="content-assist">
<h4>Content Assist</h4>
<p>If you need help, just press <kbd class="kbd docutils literal notranslate">Ctrl+SPACE</kbd>. The editor will offer possible completions (variable names, type names,
argument lists, etc.).</p>
</section>
<section id="navigation">
<h4>Navigation</h4>
<p>Hitting <kbd class="kbd docutils literal notranslate">F3</kbd> or holding the <kbd class="kbd docutils literal notranslate">Ctrl</kbd> key and clicking an identifier will jump to the definition/declaration.</p>
<p>The Eclipse platform’s bookmarking and navigation history facilities are also available in the C++ editor.</p>
</section>
<section id="commenting">
<h4>Commenting</h4>
<p>To comment out the selected lines, press <kbd class="kbd docutils literal notranslate">Ctrl+/</kbd>. To remove the comment, press <kbd class="kbd docutils literal notranslate">Ctrl+/</kbd> again.</p>
</section>
<section id="open-type">
<h4>Open Type</h4>
<p>Pressing Ctrl+Shift+T will bring up the <span class="guilabel">Open Element</span> dialog which lets you type a class name, method name or
other identifier, and opens its declaration in a new editor.</p>
</section>
<section id="exploring-the-code">
<h4>Exploring the Code</h4>
<p>The editor offers various ways to explore the code: Open Declaration <kbd class="kbd docutils literal notranslate">F3</kbd>, Open Type Hierarchy <kbd class="kbd docutils literal notranslate">F4</kbd>, Open Call Hierarchy
<kbd class="kbd docutils literal notranslate">Ctrl+Alt+H</kbd>, Quick Outline <kbd class="kbd docutils literal notranslate">Ctrl+O</kbd>, Quick Type Hierarchy <kbd class="kbd docutils literal notranslate">Ctrl+T</kbd>, Explore Macro Expansion <kbd class="kbd docutils literal notranslate">Ctrl+=</kbd>, Search for
References <kbd class="kbd docutils literal notranslate">Ctrl+Shift+G</kbd>, etc.</p>
</section>
<section id="refactoring">
<h4>Refactoring</h4>
<p>Several refactoring operations are available, for example Rename <kbd class="kbd docutils literal notranslate">Shift+Alt+R</kbd>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Several features such as content assist, go to definition, type hierarchy and refactorings rely on the
<em>Index</em>. The index contains the locations of all functions, classes, enums, defines, etc. in the project
and referenced projects. Initial indexing of large projects may take a significant amount of time. The index is kept
up to date mostly automatically, but occasionally it may be necessary to manually request reindexing the project.
Index-related actions can be found in the <span class="guilabel">Index</span> submenu of the project’s context menu.</p>
</div>
</section>
</section>
<section id="include-browser-view">
<h3>Include Browser View</h3>
<p>Dropping a C++ file into the <span class="guilabel">Include Browser View</span> displays the include files used by the C++ file (either
directly or indirectly).</p>
<figure class="align-default" id="id8">
<a class="reference internal image-reference" href="../_images/CPP-IncludeBrowserView.png"><img alt="../_images/CPP-IncludeBrowserView.png" src="../_images/CPP-IncludeBrowserView.png" style="width: 40%;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 38 </span><span class="caption-text">Include Browser</span></p>
</figcaption>
</figure>
</section>
<section id="outline-view">
<h3>Outline View</h3>
<p>During source editing, the <span class="guilabel">Outline View</span> gives you an overview of the structure of your source file and can
be used to quickly navigate inside the file.</p>
<figure class="align-default" id="id9">
<a class="reference internal image-reference" href="../_images/CPP-OutlineView.png"><img alt="../_images/CPP-OutlineView.png" src="../_images/CPP-OutlineView.png" style="width: 40%;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 39 </span><span class="caption-text">Navigating with Outline View</span></p>
</figcaption>
</figure>
</section>
<section id="type-hierarchy-view">
<h3>Type Hierarchy View</h3>
<p>Displaying the C++ type hierarchy may be helpful for understanding the inheritance relationships among your classes (and
among OMNeT++ classes).</p>
<figure class="align-default" id="id10">
<a class="reference internal image-reference" href="../_images/CPP-TypeHierarchy.png"><img alt="../_images/CPP-TypeHierarchy.png" src="../_images/CPP-TypeHierarchy.png" style="width: 60%;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 40 </span><span class="caption-text">C++ Type hierarchy</span></p>
</figcaption>
</figure>
</section>
</section>
<section id="building-the-project">
<h2>Building the Project</h2>
<section id="basics">
<h3>Basics</h3>
<p>Once you have created your source files and configured your project settings, you can build the project by selecting
<span class="guilabel">Build Project</span> from the <span class="guilabel">Project</span> menu or from the project context menu. You can also press
<kbd class="kbd docutils literal notranslate">Ctrl+B</kbd> to build all open projects in the workspace.</p>
<figure class="align-default" id="id11">
<a class="reference internal image-reference" href="../_images/CPP-BuildProject.png"><img alt="../_images/CPP-BuildProject.png" src="../_images/CPP-BuildProject.png" style="width: 40%;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 41 </span><span class="caption-text">Building a project</span></p>
</figcaption>
</figure>
<section id="build-output">
<h4>Build Output</h4>
<p>The build output (standard output and standard error) is displayed in the <span class="guilabel">Console View</span> as the build
progresses. Errors and warnings parsed from the output are displayed in the <span class="guilabel">Problems View</span>. Double-clicking a
line in the <span class="guilabel">Problems View</span> will jump to the corresponding source line. Conversely, the <span class="guilabel">Console
View</span> is more useful when you want to look at the build messages in their natural order (<span class="guilabel">Problems View</span> is
usually sorted), for example when you get a lot of build errors and you want to begin by looking at the first one.</p>
</section>
<section id="makefile-generation">
<h4>Makefile Generation</h4>
<p>When you start the build process, a makefile will be created or refreshed in each folder where makefile creation is
configured. After that, make will be invoked with the <code class="docutils literal notranslate"><span class="pre">all</span></code> target in the folder configured as build root.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>During the build process, the makefile will print out only the names of the compiled files. If you want to see the
full command line used to compile each file, specify <code class="docutils literal notranslate"><span class="pre">V=1</span></code> (verbose on) on the make command line. To add this
option, open <span class="menuselection">Project Properties ‣ C/C++ Build ‣ Behavior (tab)</span> and replace <code class="docutils literal notranslate"><span class="pre">all</span></code> with <code class="docutils literal notranslate"><span class="pre">all</span> <span class="pre">V=1</span></code> on
the <span class="guilabel">Build</span> target line.</p>
</div>
</section>
<section id="cleaning-the-project">
<h4>Cleaning the Project</h4>
<p>To clean the project, choose <span class="guilabel">Clean</span> from the <span class="guilabel">Project</span> menu, or <span class="guilabel">Clean Project</span> from
the project context menu. This will invoke <strong class="command">make</strong> with the <code class="docutils literal notranslate"><span class="pre">clean</span></code> target in the project’s build root folder, and
also in referenced projects. To only clean the local project and keep referenced projects intact, use <span class="guilabel">Clean
Local</span> item from the project context menu (see next section).</p>
</section>
<section id="referenced-projects-and-the-build-process">
<h4>Referenced Projects and the Build Process</h4>
<p>When you start the build, the IDE will build the referenced projects first. When you clean the project, the IDE will
also clean the referenced projects first. This is often inconvenient (especially if your project depends on a large
third party project). To avoid cleaning the referenced projects, use <span class="guilabel">Clean Local</span> from the project context
menu.</p>
</section>
<section id="build-configurations">
<h4>Build Configurations</h4>
<p>A project is built using the active build configuration. A project may have several build configurations, where each
configuration selects a compiler toolchain, debug or release mode, defines symbols, etc. To set the active build
configuration, choose <span class="menuselection">Build Configurations ‣ Set Active</span> from the project context menu.</p>
<figure class="align-default" id="id12">
<a class="reference internal image-reference" href="../_images/CPP-BuildConfiguration.png"><img alt="../_images/CPP-BuildConfiguration.png" src="../_images/CPP-BuildConfiguration.png" style="width: 60%;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 42 </span><span class="caption-text">Activating a build configuration</span></p>
</figcaption>
</figure>
</section>
</section>
<section id="console-view">
<h3>Console View</h3>
<p>The <span class="guilabel">Console View</span> displays the output of the build process.</p>
<figure class="align-default" id="id13">
<a class="reference internal image-reference" href="../_images/CPP-ConsoleView.png"><img alt="../_images/CPP-ConsoleView.png" src="../_images/CPP-ConsoleView.png" style="width: 80%;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 43 </span><span class="caption-text">Build output in a console</span></p>
</figcaption>
</figure>
</section>
<section id="problems-view">
<h3>Problems View</h3>
<p>The <span class="guilabel">Problems View</span> contains the errors and warnings generated by the build process. You can browse the
problem list and double-click any message to go to the problem location in the source file. NED file and INI file
problems are also reported in this view along with C++ problems. The editors are annotated with these markers, too.
Hover over an error marker in the editor window to get the corresponding message as a tooltip.</p>
<figure class="align-default" id="id14">
<a class="reference internal image-reference" href="../_images/CPP-ProblemsView.png"><img alt="../_images/CPP-ProblemsView.png" src="../_images/CPP-ProblemsView.png" style="width: 80%;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 44 </span><span class="caption-text">C++ problems</span></p>
</figcaption>
</figure>
</section>
</section>
<section id="configuring-the-project">
<h2>Configuring the Project</h2>
<section id="configuring-the-build-process">
<h3>Configuring the Build Process</h3>
<p>The make invocation can be configured on <span class="guilabel">C/C++ Build</span> page of the <span class="guilabel">Project Properties</span> dialog. Most
settings are already set correctly and do not need to be changed. One exception is the <span class="guilabel">Enable parallel build</span>
option on the <span class="guilabel">Behavior</span> tab that you may want to enable, especially if you have a multi-core computer.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Do not set the number of parallel jobs to be significantly higher than the number of CPU cores you have. In
particular, never turn on the <span class="guilabel">Use unlimited jobs</span> option, as it will start an excessive number of compile
processes, and can easy consume all available memory in the system.</p>
</div>
<p>We do not recommend that you change any setting on property pages under the <span class="guilabel">C/C++ Build</span> tree node.</p>
</section>
<section id="managing-build-configurations">
<h3>Managing Build Configurations</h3>
<p>A project may have several build configurations, where each configuration describes the selected compiler toolchain,
debug or release mode, any potential extra include and linker paths, defined symbols, etc. You can activate, create or
delete build configurations under the <span class="guilabel">Build Configurations</span> submenu of the project context menu.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Make sure that the names of all configurations contain the <code class="docutils literal notranslate"><span class="pre">debug</span></code> or the <code class="docutils literal notranslate"><span class="pre">release</span></code>
substring. The IDE launcher uses the name of the configuration to switch the matching configuration depending whether
you want to debug or run the simulation.</p>
</div>
</section>
<section id="configuring-the-project-build-system">
<h3>Configuring the Project Build System</h3>
<p>OMNeT++ uses makefiles to build the project. You can use a single makefile for the whole project, or a hiearchy of
makefiles. Each makefile may be hand-written (i.e. provided by you), or generated automatically. The IDE provides
several options for automatically created makefiles.</p>
<p>The build system for an OMNeT++ project can be configured on the <span class="menuselection">OMNeT++ ‣ Makemake</span> page of the
<span class="guilabel">Project Properties</span> dialog. All settings you do in this page will affect all build configurations.</p>
<figure class="align-default" id="id15">
<a class="reference internal image-reference" href="../_images/CPP-SourceFolder.png"><img alt="../_images/CPP-SourceFolder.png" src="../_images/CPP-SourceFolder.png" style="width: 60%;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 45 </span><span class="caption-text">Configuring Makefiles</span></p>
</figcaption>
</figure>
<section id="folders-and-makefiles">
<h4>Folders and Makefiles</h4>
<p>The page displays the folder tree of the project. Using controls on the page (<span class="guilabel">Build</span> group in the top-right
corner), you can declare that a selected folder contains a hand-written (custom) makefile, or tell the IDE to generate a
makefile for you. Generated makefiles will be automatically refreshed before each build. If a makefile is configured for
a folder, the makefile kind will be indicated with a small decoration on the folder icon.</p>
<p>The build root folder is indicated with a small arrow. This is the folder in which the IDE’s <span class="guilabel">Build</span> function
will invoke the make command, so it should contain a makefile. It is expected that this makefile will build the whole
project, so it is supposed to invoke all other makefiles, either directly or indirectly. By default, the build root
folder is the project root. This is usually fine, but if you really need to change the project build root, overwrite the
<span class="guilabel">Build location</span> setting in the <span class="guilabel">C/C++ Build</span> page of the same dialog.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All generated makefiles will be named <code class="file docutils literal notranslate"><span class="pre">Makefile</span></code>; custom makefiles are also expected to have this name.</p>
</div>
</section>
<section id="source-folders">
<h4>Source Folders</h4>
<p>In addition to makefiles, you also need to specify where your C++ files are located (source folders). This is usually
the <code class="file docutils literal notranslate"><span class="pre">src</span></code> folder of the project, or, for small projects, the project root. It is also possible to exclude folders from
a source folder. The controls on the right-bottom part of the dialog (<span class="guilabel">Source</span> group) allow you to set up
source folders and exclusions on the project. Source files that are outside source folders or are in an excluded folder
will be ignored by both the IDE and the build process.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Source folders and exclusions that you configure on this page actually modify the contents of the <span class="guilabel">Source
Location</span> tab of the <span class="menuselection">C++ General ‣ Paths and Symbols</span> page of the project properties dialog; the changes
will affect all build configurations.</p>
</div>
<p>Automatically created makefiles are by default <span class="guilabel">deep</span>, meaning that they include all (non-excluded) source
files under them in the build. That is, a source file will be included in the build if it is both under a source folder
and covered by a makefile. (This applies to automatically generated makefiles; the IDE has obviously no control over the
behaviour of custom makefiles.)</p>
</section>
<section id="id1">
<h4>Makefile Generation</h4>
<p>Makefile generation for the selected folder can be configured on the <span class="guilabel">Makemake Options</span> dialog, which can be
brought up by clicking the <span class="guilabel">Options</span> button on the page. The dialog is described in the next section.</p>
</section>
<section id="command-line-build">
<h4>Command-line Build</h4>
<p>To re-create your makefiles on the command line, you can export the settings by pressing the <span class="guilabel">Export</span> button.
This action will create a file with the name <code class="file docutils literal notranslate"><span class="pre">makemakefiles</span></code>. After exporting, execute
<strong class="command">make -f makemakefiles</strong> from the command line.</p>
</section>
</section>
<section id="configuring-makefile-generation-for-a-folder">
<h3>Configuring Makefile Generation for a Folder</h3>
<p>Makefile generation for a folder can be configured in the <span class="guilabel">Makemake Options</span> dialog. To access the dialog,
open the <span class="menuselection">OMNeT++ ‣ Makemake</span> page in the <span class="guilabel">Project Properties</span> dialog, select the folder, make sure
makefile generation is enabled for it, and click the <span class="guilabel">Options</span> button.</p>
<p>The following sections describe each page of the dialog.</p>
<section id="the-target-tab">
<h4>The <span class="guilabel">Target</span> Tab</h4>
<p>On the first, <span class="guilabel">Target</span> tab of the dialog, you can specify how the final target of the makefile is created.</p>
<ul class="simple">
<li><p><span class="guilabel">Target type</span>: The build target can be an executable, a shared or static library, or the linking step may
be omitted altogether. Makemake options: <code class="docutils literal notranslate"><span class="pre">--make-so</span></code>, <code class="docutils literal notranslate"><span class="pre">--make-lib</span></code>, <code class="docutils literal notranslate"><span class="pre">--nolink</span></code></p></li>
<li><p><span class="guilabel">Export this shared/static library for other projects</span>: This option is observed if a library (shared or
static) is selected as target type, and works in conjunction with the <span class="guilabel">Link with libraries exported from
referenced projects</span> option on the <span class="guilabel">Link</span> tab. Namely, referencing projects will automatically link with
this library if both the library is exported from this project AND linking with exported libraries is enabled in the
referencing project. Makemake option: <code class="docutils literal notranslate"><span class="pre">--meta:export-library</span></code></p></li>
<li><p><span class="guilabel">Target name</span>: You may set the target name. The default value is derived from the project name. Makemake
option: <code class="docutils literal notranslate"><span class="pre">-o</span></code> (If you are building a debug configuration, the target name will be implicitly suffixed by the
<code class="docutils literal notranslate"><span class="pre">_dbg</span></code> string.)</p></li>
<li><p><span class="guilabel">Output directory</span>: The output directory specifies where the object files and the final target will be
created, relative to the project root. Makemake option: <code class="docutils literal notranslate"><span class="pre">-O</span></code></p></li>
</ul>
<figure class="align-default" id="id16">
<a class="reference internal image-reference" href="../_images/CPP-ConfigureProject2.png"><img alt="../_images/CPP-ConfigureProject2.png" src="../_images/CPP-ConfigureProject2.png" style="width: 60%;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 46 </span><span class="caption-text">Target definition</span></p>
</figcaption>
</figure>
</section>
<section id="the-scope-tab">
<h4>The <span class="guilabel">Scope</span> Tab</h4>
<figure class="align-default" id="id17">
<a class="reference internal image-reference" href="../_images/CPP-ConfigureProject.png"><img alt="../_images/CPP-ConfigureProject.png" src="../_images/CPP-ConfigureProject.png" style="width: 60%;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 47 </span><span class="caption-text">Scope of makefile</span></p>
</figcaption>
</figure>
<p>The <span class="guilabel">Scope</span> tab allows you to configure the scope of the makefile and which source files will be included.</p>
<ul class="simple">
<li><p><span class="guilabel">Deep compile</span>: When enabled, the makefile will compile the source files in the whole subdirectory tree
(except excluded folders and folder covered by other makefiles). When disabled, the makefile only compiles sources in
the makefile’s folder. Makemake option: <code class="docutils literal notranslate"><span class="pre">--deep</span></code></p></li>
<li><p><span class="guilabel">Recursive make</span>: When enabled, the build will invoke make in all descendant folders that are configured to
contain a makefile. Makemake option: <code class="docutils literal notranslate"><span class="pre">--meta:recurse</span></code> (resolves to multiple <code class="docutils literal notranslate"><span class="pre">-d</span></code> options)</p></li>
<li><p><span class="guilabel">More » Additionally invoke make in the following directories</span>: If you want to invoke additional makefiles
from this makefile, specify which directories should be visited (relative to this makefile). This option is useful if
you want to invoke makefiles outside this source tree. Makemake option: <code class="docutils literal notranslate"><span class="pre">-d</span></code></p></li>
</ul>
</section>
<section id="the-compile-tab">
<h4>The <span class="guilabel">Compile</span> Tab</h4>
<figure class="align-default" id="id18">
<a class="reference internal image-reference" href="../_images/CPP-ConfigureProject3.png"><img alt="../_images/CPP-ConfigureProject3.png" src="../_images/CPP-ConfigureProject3.png" style="width: 60%;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 48 </span><span class="caption-text">Compiler options</span></p>
</figcaption>
</figure>
<p>The <span class="guilabel">Compile</span> tab allows you to adjust the parameters passed to the compiler during the build process.</p>
<p>Settings that affect the include path:</p>
<ul class="simple">
<li><p><span class="guilabel">Export include path for other projects</span> makes this project’s include path available for other dependent
projects. This is usually required if your project expects that other independent models will extend it in the
future.</p></li>
<li><p><span class="guilabel">Add include paths exported from referenced projects</span> allows a dependent project to use header files from
the dependencies if those projects have exported their include path (i.e. the above option was turned on.)</p></li>
<li><p><span class="guilabel">Add include dirs and other compile options from enabled project features</span>: Project features may require
additional include paths and defines to compile properly. Enabling this option will add those command line arguments
(specified in the <code class="file docutils literal notranslate"><span class="pre">.oppfeatures</span></code> file) to the compiler command line.</p></li>
</ul>
<p>Source files:</p>
<ul class="simple">
<li><p><span class="guilabel">C++ file extension</span>: You can specify the source file extension you are using in the project (<code class="file docutils literal notranslate"><span class="pre">.cc</span></code> or
<code class="file docutils literal notranslate"><span class="pre">.cpp</span></code>). We recommend that you use <code class="file docutils literal notranslate"><span class="pre">.cc</span></code> in your projects. Makemake option: <code class="docutils literal notranslate"><span class="pre">-e</span></code></p></li>
</ul>
<p>If you build a Windows DLL, symbols you want to be available from other DLLs (or executables) need to be explicitly
exported from the DLL. Functions, variables and classes must be marked with <code class="docutils literal notranslate"><span class="pre">__declspec(dllexport)</span></code> when the DLL is
compiled, and with <code class="docutils literal notranslate"><span class="pre">__declspec(dllimport)</span></code> when you reference them from external code. This is achieved by defining a
macro which expands differently in the two cases. The OMNeT++ convention is to name the macro <code class="docutils literal notranslate"><span class="pre">FOO_API</span></code>, where
<code class="docutils literal notranslate"><span class="pre">FOO</span></code> is your project’s short name. The macro should be defined as follows:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#if defined(FOO_EXPORT)</span>
<span class="cp">#  define FOO_API OPP_DLLEXPORT</span>
<span class="cp">#elif defined(FOO_IMPORT)</span>
<span class="cp">#  define FOO_API OPP_DLLIMPORT</span>
<span class="cp">#else</span>
<span class="cp">#  define FOO_API</span>
<span class="cp">#endif</span>
</pre></div>
</div>
<p>and the above definition should be manually placed into a header file which is included by all headers where the macro
is used. <code class="docutils literal notranslate"><span class="pre">OPP_DLLEXPORT</span></code> and <code class="docutils literal notranslate"><span class="pre">OPP_DLLIMPORT</span></code> are provided by <code class="docutils literal notranslate"><span class="pre">&lt;omnetpp.h&gt;</span></code>, and <code class="docutils literal notranslate"><span class="pre">FOO_EXPORT</span></code> / <code class="docutils literal notranslate"><span class="pre">FOO_IMPORT</span></code>
that control the macro expansion will be provided by the generated makefile via a compile option.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">FOO_API</span></code> macro is used as illustrated in the following code:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">FOO_API</span> <span class="n">ExportedClass</span> <span class="p">{</span>
   <span class="c1">// public methods will be automatically exported</span>
<span class="p">};</span>
<span class="kt">int</span> <span class="n">FOO_API</span> <span class="nf">exportedFunction</span><span class="p">(...);</span>
<span class="k">extern</span> <span class="kt">int</span> <span class="n">FOO_API</span> <span class="n">exportedGlobalVariable</span><span class="p">;</span>
</pre></div>
</div>
<p>Settings for Windows DLLs:</p>
<ul class="simple">
<li><p><span class="guilabel">Force compiling object files for use in DLLs</span>: If the makefile target is a DLL, OMNeT++ automatically
compiles the sources for DLL (defines the <code class="docutils literal notranslate"><span class="pre">FOO_EXPORT</span></code> macro, etc.), regardless of the state of this option.
Rather, this option is useful if the makefile target is <strong>not</strong> a DLL, but the code compiled here will
eventually end up in a DLL. Makemake option: <code class="docutils literal notranslate"><span class="pre">-S</span></code></p></li>
<li><p><span class="guilabel">DLL export/import symbol</span>: Name for the DLL import/export symbol, i.e. <code class="docutils literal notranslate"><span class="pre">FOO</span></code> in the above examples.
Makemake option: <code class="docutils literal notranslate"><span class="pre">-p</span></code></p></li>
</ul>
</section>
<section id="the-link-tab">
<h4>The <span class="guilabel">Link</span> Tab</h4>
<p>Link options allow the user to fine-tune the linking steps at the end of the build process.</p>
<figure class="align-default" id="id19">
<a class="reference internal image-reference" href="../_images/CPP-ConfigureProject4.png"><img alt="../_images/CPP-ConfigureProject4.png" src="../_images/CPP-ConfigureProject4.png" style="width: 60%;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 49 </span><span class="caption-text">Linker options</span></p>
</figcaption>
</figure>
<ul class="simple">
<li><p><span class="guilabel">Link with libraries exported from referenced projects</span>: If your project references other projects that
build static or dynamic libraries, you can instruct the linker to automatically link with those libraries by enabling
this option. The libraries from the other projects must be exported via the <span class="guilabel">Export this shared/static
library for other projects</span> option on the <span class="guilabel">Target</span> tab. Makemake option: <code class="docutils literal notranslate"><span class="pre">--meta:use-exported-libs</span></code></p></li>
<li><p><span class="guilabel">Add libraries and other linker options from enabled project features</span>: Project features may require
additional libraries and linker options to build properly. Enabling this option will add those command line arguments
(specified in the <code class="file docutils literal notranslate"><span class="pre">.oppfeatures</span></code> file) to the linker command line.</p></li>
<li><p><span class="guilabel">User interface libraries to link with</span>: If the makefile target is an executable, you may specify which
OMNeT++ user interface libraries (Cmdenv, Qtenv, or both) should be linked into the program. Makemake option: <code class="docutils literal notranslate"><span class="pre">-u</span></code></p></li>
<li><p><span class="guilabel">More » Additional libraries to link with</span>: This box allows you to specify additional libraries to link
with. Specify the library name without its path, possible prefix (<code class="docutils literal notranslate"><span class="pre">lib</span></code>) and file extension, and also without the
<code class="docutils literal notranslate"><span class="pre">-l</span></code> option. The library must be on the linker path; the linker path can be edited on the <span class="guilabel">Library Paths</span>
tab of the <span class="menuselection">C/C++ General ‣ Paths and Symbols</span> page of the <span class="guilabel">Project Properties</span> dialog. Makemake
option: <code class="docutils literal notranslate"><span class="pre">-l</span></code></p></li>
<li><p><span class="guilabel">More » Additional objects to link with</span>: Additional object files and libraries can be specified here. The
files must be given with their full paths and file extension. Wildcards and makefile macros are also accepted.
Example: <code class="file docutils literal notranslate"><span class="pre">$O/subdir/*.o</span></code>. Makemake option: none (files will become plain makemake arguments)</p></li>
</ul>
</section>
<section id="the-custom-tab">
<h4>The <span class="guilabel">Custom</span> Tab</h4>
<p>The <span class="guilabel">Custom</span> tab allows the customization of the makefiles by inserting handwritten makefile fragments into
the automatically generated makefile. This lets you contribute additional targets, rules, variables, etc.</p>
<ul class="simple">
<li><p><span class="guilabel">Makefrag</span>: If the folder contains a file named <code class="file docutils literal notranslate"><span class="pre">makefrag</span></code>, its contents will be automatically copied
into the generated makefile, just above the first target rule. <code class="file docutils literal notranslate"><span class="pre">makefrag</span></code> allows you to customize the generated
makefile to some extent; for example, you can add new targets (e.g. to generate documentation or run a test suite),
new rules (e.g. to generate source files during the build), override the default target, add new dependencies to
existing targets, overwrite variables, etc. The dialog lets you edit the contents of the <code class="file docutils literal notranslate"><span class="pre">makefrag</span></code> file directly
(it will be saved when you accept the dialog).</p></li>
<li><p><span class="guilabel">More » Fragment files to include</span>: Here, it is possible to explicitly specify a list of makefile fragment
files to include, instead of the default <code class="file docutils literal notranslate"><span class="pre">makefrag</span></code>. Makemake option: <code class="docutils literal notranslate"><span class="pre">-i</span></code></p></li>
</ul>
</section>
<section id="the-preview-tab">
<h4>The <span class="guilabel">Preview</span> Tab</h4>
<p>The <span class="guilabel">Preview</span> tab displays the command line options that will be passed to <strong class="command">opp_makemake</strong> to generate the
makefile. It consists of two parts:</p>
<ul class="simple">
<li><p><span class="guilabel">Makemake options</span>: This is an editable list of makefile generation options. Most options map
directly to checkboxes, edit fields and other controls on the previous tabs of the dialog. For example, if you check
the <span class="guilabel">Deep compile</span> checkbox on the <span class="guilabel">Scope</span> tab, the <code class="docutils literal notranslate"><span class="pre">--deep</span></code> option will be added to the
command line. Conversely, if you delete <code class="docutils literal notranslate"><span class="pre">--deep</span></code> from the command line options, that will cause the <span class="guilabel">Deep
compile</span> checkbox to be unchecked. Some options are directly <strong class="command">opp_makemake</strong> options, others are “meta” options that
will be resolved to one or more <strong class="command">opp_makemake</strong> options; see below.</p></li>
<li><p><span class="guilabel">Makemake options modified with CDT settings and with meta-options resolved</span>: This is a read-only text
field, displayed for information purposes only. Not all options in the above options list are directly understood by
<strong class="command">opp_makemake</strong>; namely, the options that start with <code class="docutils literal notranslate"><span class="pre">--meta:</span></code> denote higher-level features offered by the IDE
only. Meta options will be translated to <strong class="command">opp_makemake</strong> options by the IDE. For example,
<code class="docutils literal notranslate"><span class="pre">--meta:auto-include-path</span></code> will be resolved by the IDE to multiple <code class="docutils literal notranslate"><span class="pre">-I</span></code> options, one for each directory in the
C++ source trees of the project. This field shows the <strong class="command">opp_makemake</strong> options after the resolution of the meta
options.</p></li>
</ul>
</section>
</section>
<section id="project-references-and-makefile-generation">
<h3>Project References and Makefile Generation</h3>
<p>When your project references another project (say the INET Framework), your project’s build will be affected in the
following way:</p>
<ul class="simple">
<li><p>Include path: Source folders in referenced projects will be automatically added to the include path of your makefile
if the <span class="guilabel">Add include paths exported from referenced projects</span> option on the <span class="guilabel">Compile</span> tab is
checked where the referenced projects also enable the <span class="guilabel">Export include path for other projects</span> option.</p></li>
<li><p>Linking: If the <span class="guilabel">Link with libraries exported from referenced projects</span> option on the <span class="guilabel">Link</span> tab
is enabled, then the makefile target will be linked with those libraries in referenced projects that have the
<span class="guilabel">Export this shared/static library for other projects</span> option checked on the <span class="guilabel">Target</span> tab.</p></li>
<li><p>NED types: NED types defined in a referenced project are automatically available in referencing projects.</p></li>
</ul>
</section>
</section>
<section id="project-features">
<h2>Project Features</h2>
<section id="motivation">
<h3>Motivation</h3>
<p>Long compile times are often an inconvenience when working with large OMNeT++-based model frameworks like the INET
Framework. The IDE feature named <span class="guilabel">Project Features</span> lets you reduce build times by excluding or disabling
parts of the model framework that you do not use for your simulation study. For example, when you are working on mobile
ad-hoc simulations in INET, you can disable the compilation of Ethernet, IPv6/MIPv6, MPLS, and other unrelated protocol
models. The word <em>feature</em> refers to a piece of the project codebase that can be turned off as a whole.</p>
<p>Additional benefits of project features include a less cluttered model palette in the NED editor, being able to exclude
code that does not compile on your system, and enforcing cleaner separation of unrelated parts in the model framework.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A similar effect could also achieved via breaking up the model framework (e.g. INET) into several smaller projects,
but that would cause other kinds of inconveniences for model developers and users alike.</p>
</div>
</section>
<section id="what-is-a-project-feature">
<h3>What is a Project Feature</h3>
<p>Features can be defined per project. As already mentioned, a feature is a piece of the project codebase that can be
turned off as a whole, that is, excluded from the C++ sources (and thus from the build) and also from NED. Feature
definitions are typically written and distributed by the author of the project; end users are only presented with the
option of enabling/disabling those features. A feature definition contains:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ID</span></code>, which is a unique identifier inside the feature definition file.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Feature</span> <span class="pre">name</span></code>, for example <code class="docutils literal notranslate"><span class="pre">&quot;UDP&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;Mobility</span> <span class="pre">examples&quot;</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Feature</span> <span class="pre">description</span></code>. This is a few sentences of text describing what the feature is or does; for example
<code class="docutils literal notranslate"><span class="pre">&quot;Implementation</span> <span class="pre">of</span> <span class="pre">the</span> <span class="pre">UDP</span> <span class="pre">protocol&quot;</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Labels</span></code>. This is list of labels or keywords that facilitate grouping or finding features.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Initially</span> <span class="pre">enabled</span></code>. This is a boolean flag that determines the initial enablement of the feature.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Required</span> <span class="pre">features</span></code>. Some features may be built on top of others; for example, a HMIPv6 protocol
implementation relies on MIPv6, which in turn relies on IPv6. Thus, HMIPv6 can only be enabled if MIPv6 and IPv6 are
enabled as well. This is a space-separated list of feaure IDs.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">NED</span> <span class="pre">packages</span></code>. This is a space-separated list of NED package names that identify the code that implements
the feature. When you disable the feature, NED types defined in those packages and their subpackages will be
excluded; also, C++ code in the folders that correspond to the packages (i.e. in the same folders as excluded NED
files) will also be excluded.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Extra</span> <span class="pre">C++</span> <span class="pre">source</span> <span class="pre">folders</span></code>. If the feature contains C++ code that lives outside NED source folders
(nontypical), those folders are listed here.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Compile</span> <span class="pre">options</span></code>, for example <code class="docutils literal notranslate"><span class="pre">-DWITH_IPv6</span></code>. When the feature is enabled, the compiler options listed
here are either added to the compiler command line of all C++ files or they can be used to generate a header file
containing all these defines so that header file can be included in all C++ files. A typical use of this field is
defining symbols (<code class="docutils literal notranslate"><span class="pre">WITH_xxx</span></code>) that allows you to write conditional code that only compiles when a given feature is
enabled. Currently only the <code class="docutils literal notranslate"><span class="pre">-D</span></code> option (<em>define symbol</em>) is supported here.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Linker</span> <span class="pre">options</span></code>. When the feature is enabled, the linker options listed here are added to the linker
command line. A typical use of this field is linking with additional libraries that the feature’s code requires, for
example libavcodec. Currently only the <code class="docutils literal notranslate"><span class="pre">-l</span></code> option (<span class="guilabel">link with library</span>) is supported here.</p></li>
</ul>
</section>
<section id="the-project-features-dialog">
<h3>The Project Features Dialog</h3>
<p>Features can be viewed, enabled and disabled on the <span class="guilabel">Project Features</span> page of the <span class="guilabel">Project
Properties</span> dialog. The <span class="menuselection">Project ‣ Project Features</span> menu item is a direct shortcut to this property page.</p>
<figure class="align-default" id="id20">
<a class="reference internal image-reference" href="../_images/CPP-Features.png"><img alt="../_images/CPP-Features.png" src="../_images/CPP-Features.png" style="width: 60%;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 50 </span><span class="caption-text">The Project Features page</span></p>
</figcaption>
</figure>
<p>The central area of the dialog page lists the features defined for the project. Hovering the mouse over a list item will
show the description and other fields of the feature in a tooltip window. Check an item to enable the feature, and
uncheck to disable.</p>
<p>When you enable a feature that requires other features to work, the dialog will ask for permission to enable the
required features as well. Also, if you disable a feature that others depend on, they will be disabled, too.</p>
<p>The <span class="guilabel">Apply</span>, <span class="guilabel">OK</span> and <span class="guilabel">Cancel</span> buttons work as expected. <span class="guilabel">Restore Defaults</span>
restores the features to their initial state (see the <span class="guilabel">Initially enabled</span> attribute above).</p>
<p>Above the list there is a notification area in the dialog. If the IDE detects that your project’s configuration is
inconsistent with the feature enablements, it will display a warning there, and offer a way to automatically fix the
problems. Fixing means that the IDE will adjust the project’s NED and C++ settings to make them consistent with the
feature enablements. Such check is also performed just before build.</p>
</section>
<section id="what-happens-when-you-enable-disable-a-feature">
<h3>What Happens When You Enable/Disable a Feature</h3>
<p>When you enable or disable a feature on the <span class="guilabel">Project Features</span> page, a number of project settings will be
modified:</p>
<ul class="simple">
<li><p>NED package exclusions. This corresponds to the contents of the <span class="guilabel">Excluded package subtrees</span> list on the
<span class="guilabel">NED Source Folders</span> property page. When a feature is disabled, its NED packages will be excluded (added to
the list), and vice versa.</p></li>
<li><p>C++ folder exclusions. This can be viewed/edited on the <span class="guilabel">Makemake</span> property page, and also on the
<span class="guilabel">Source Location</span> tab of the <span class="guilabel">C/C++ General &gt; Paths and Symbols</span> property page.</p></li>
<li><p>Compile options. For example, if the feature defines preprocessor symbols (<code class="docutils literal notranslate"><span class="pre">-DWITH_xxx</span></code>), they can be used to
generate a header file that contains the enabled macro definitions and that file can be included in all C++ files.</p></li>
<li><p>Linker options. For example, if the feature defines additional libraries to link with, they will be displayed on the
<span class="guilabel">Libraries</span> tab of the <span class="menuselection">C/C++ General ‣ Paths and Symbols</span> property page.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Feature enablements are saved to the <code class="file docutils literal notranslate"><span class="pre">.oppfeaturestate</span></code> file in the project root.</p>
</div>
</section>
<section id="using-features-from-command-line">
<h3>Using Features from Command Line</h3>
<p><span class="guilabel">Project Features</span> can be easily configured from the IDE, but command line tools (<strong class="command">opp_makemake</strong>, etc.) can
also use them with the help of the <strong class="command">opp_featuretool</strong> command.</p>
<p>If you want to build the project from the command line with the same feature combination the IDE is using, you need to
generate the makefiles with the same <strong class="command">opp_makemake</strong> options that the IDE uses in that feature combination. The
<strong class="command">opp_featuretool makemakeargs</strong> command (executed in the project’s root directory) will show all the required arguments
that you need to specify for the <strong class="command">opp_makemake</strong> command to build the same output as the IDE. This allows you to keep
the same features enabled no matter how you build your project.</p>
<p>Alternatively, you can choose <span class="guilabel">Export</span> on the <span class="guilabel">Makemake</span> page, and copy/paste the options from the
generated <code class="file docutils literal notranslate"><span class="pre">makemakefiles</span></code> file. This method is not recommended, because you must redo it manually each time after
changing the enablement state of a feature.</p>
</section>
<section id="the-oppfeatures-file">
<h3>The <code class="file docutils literal notranslate"><span class="pre">.oppfeatures</span></code> File</h3>
<p>Project features are defined in the <code class="file docutils literal notranslate"><span class="pre">.oppfeatures</span></code> file in your project’s root directory. This is an XML file, and it
currently has to be written by hand (there is no specialized editor for it).</p>
<p>The root element is <code class="docutils literal notranslate"><span class="pre">&lt;features&gt;</span></code>, and it may have several <code class="docutils literal notranslate"><span class="pre">&lt;feature&gt;</span></code> child elements, each defining a project
feature. Attributes of the <code class="docutils literal notranslate"><span class="pre">&lt;features&gt;</span></code> element define the root(s) of the source folder(s) (<code class="docutils literal notranslate"><span class="pre">cppSourceRoots</span></code>) and
the name of a generated header file that contains all defines specified by the <code class="docutils literal notranslate"><span class="pre">compilerFlags</span></code> attribute in the
enabled features. The fields of a feature are represented with XML attributes; attribute names are <code class="docutils literal notranslate"><span class="pre">id</span></code>, <code class="docutils literal notranslate"><span class="pre">name</span></code>,
<code class="docutils literal notranslate"><span class="pre">description</span></code>, <code class="docutils literal notranslate"><span class="pre">initiallyEnabled</span></code>, <code class="docutils literal notranslate"><span class="pre">requires</span></code>, <code class="docutils literal notranslate"><span class="pre">labels</span></code>, <code class="docutils literal notranslate"><span class="pre">nedPackages</span></code>, <code class="docutils literal notranslate"><span class="pre">extraSourceFolders</span></code>,
<code class="docutils literal notranslate"><span class="pre">compileFlags</span></code> and <code class="docutils literal notranslate"><span class="pre">linkerFlags</span></code>. Items within attributes that represent lists (<code class="docutils literal notranslate"><span class="pre">requires</span></code>, <code class="docutils literal notranslate"><span class="pre">labels</span></code>, etc.) are
separated by spaces.</p>
<p>Here is an example feature from the INET Framework:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;features</span> <span class="na">cppSourceRoots=</span><span class="s">&quot;src&quot;</span> <span class="na">definesFile=</span><span class="s">&quot;src/inet/features.h&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;feature</span>
        <span class="na">id=</span><span class="s">&quot;TCP_common&quot;</span>
        <span class="na">name=</span><span class="s">&quot;TCP Common&quot;</span>
        <span class="na">description =</span> <span class="s">&quot;The common part of TCP implementations&quot;</span>
        <span class="na">initiallyEnabled =</span> <span class="s">&quot;true&quot;</span>
        <span class="na">requires =</span> <span class="s">&quot;&quot;</span>
        <span class="na">labels =</span> <span class="s">&quot;&quot;</span>
        <span class="na">nedPackages =</span> <span class="s">&quot;</span>
<span class="s">                       inet.transport.tcp_common</span>
<span class="s">                       inet.applications.tcpapp</span>
<span class="s">                       inet.util.headerserializers.tcp</span>
<span class="s">                      &quot;</span>
        <span class="na">extraSourceFolders =</span> <span class="s">&quot;&quot;</span>
        <span class="na">compileFlags =</span> <span class="s">&quot;-DWITH_TCP_COMMON&quot;</span>
        <span class="na">linkerFlags =</span> <span class="s">&quot;&quot;</span>
    <span class="nt">/&gt;</span>
</pre></div>
</div>
</section>
<section id="how-to-introduce-a-project-feature">
<h3>How to Introduce a Project Feature</h3>
<p>If you plan to introduce a project feature in your project, here’s what you’ll need to do:</p>
<ul class="simple">
<li><p>Isolate the code that implements the feature into a separate source directory (or several directories). This is
because only whole folders can be declared as part of a feature, individual source files cannot.</p></li>
<li><p>Check the remainder of the project. If you find source lines that reference code from the new feature, use
conditional compilation (<code class="docutils literal notranslate"><span class="pre">#ifdef</span> <span class="pre">WITH_YOURFEATURE</span></code>) to make sure that code compiles (and either works sensibly or
throws an error) when the new feature is disabled. (Your feature should define the <code class="docutils literal notranslate"><span class="pre">WITH_YOURFEATURE</span></code> symbol, i.e.
<code class="docutils literal notranslate"><span class="pre">-DWITH_YOURFEATURE</span></code> will need to be added to the feature compile flags.)</p></li>
<li><p>Add the feature description into the <code class="file docutils literal notranslate"><span class="pre">.oppfeatures</span></code> file of your project including the required feature
dependencies.</p></li>
<li><p>Test. At the minimum, test that your project compiles at all, both with the new feature enabled and disabled. More
thorough, automated tests can be built using <code class="file docutils literal notranslate"><span class="pre">opp_featuretool</span></code>.</p></li>
</ul>
</section>
</section>
<section id="project-files">
<h2>Project Files</h2>
<p>Eclipse, CDT and the OMNeT++ IDE uses several files in the project to store settings. These files are located in the
project root directory, and they are normally hidden by the IDE in the <span class="guilabel">Project Explorer View</span>. The files
include:</p>
<ul class="simple">
<li><p><code class="file docutils literal notranslate"><span class="pre">.project</span></code> : Eclipse stores the general project properties in this file including project name, dependencies from
other projects, and project type (i.e. whether OMNeT++-specific features are supported or this is only a generic
Eclipse project).</p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">.cproject</span></code> : This file contains settings specific to C++ development, including the build configurations; and
per-configuration settings such as source folder locations and exclusions, include paths, linker paths, symbols; the
build command, error parsers, debugger settings and so on.</p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">.oppbuildspec</span></code> : Contains settings specific to OMNeT++. This file stores per-folder makefile generation settings
that can be configured on the <span class="guilabel">Makemake</span> page of the <span class="guilabel">Project Properties</span> dialog.</p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">.oppfeatures</span></code> : Optionally contains the definitions of project features.</p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">.oppfeaturestate</span></code> : Optionally contains the current enablement state of the features. (We do not recommend keeping
this file under version control.)</p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">.nedfolders</span></code> : Contains the names of NED source folders; this is the information that can be configured on the
<span class="guilabel">NED Source Folders</span> page of the <span class="guilabel">Project Properties</span> dialog.</p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">.nedexclusions</span></code> : Contains the names of excluded NED packages.</p></li>
</ul>
<p>If you are creating a project where no C++ support is needed (i.e. you are using an existing precompiled simulation
library and you edit only NED and Ini files), the <code class="file docutils literal notranslate"><span class="pre">.cproject</span></code> and <code class="file docutils literal notranslate"><span class="pre">.oppbuildspec</span></code> files will not be present in your
project.</p>
</section>
</section>


          </div>
          
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;1992-2021, András Varga and OpenSim Ltd..
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.1.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/userguide/cpp-development.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>